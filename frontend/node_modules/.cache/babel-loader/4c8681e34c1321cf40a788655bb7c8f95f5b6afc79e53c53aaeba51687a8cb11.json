{"ast":null,"code":"import React,{useEffect,useState}from'react';import{API_BASE_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ThresholdManager=()=>{const[items,setItems]=useState([]);const[options,setOptions]=useState({colors:[],sizes:[]});const[loading,setLoading]=useState(false);const[error,setError]=useState('');const loadAll=async()=>{setLoading(true);setError('');try{const response=await fetch(`${API_BASE_URL}/thresholds/all`);const data=await response.json();setItems(data.thresholds||[]);}catch(e){setError('Failed to load thresholds');}finally{setLoading(false);}};useEffect(()=>{loadAll();},[]);const fetchOptions=async name=>{try{const res=await fetch(`${API_BASE_URL}/key-items/options/${encodeURIComponent(name)}`);const data=await res.json();setOptions({colors:data.colors||[],sizes:data.sizes||[]});}catch(e){// ignore\n}};const saveThreshold=async(itemName,size,color,threshold)=>{const body={item_name:itemName,size,color,threshold};const response=await fetch(`${API_BASE_URL}/thresholds/set`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});if(!response.ok)throw new Error('Failed to save');};const resetThreshold=async(itemName,size,color)=>{const response=await fetch(`${API_BASE_URL}/thresholds/reset/${encodeURIComponent(itemName)}/${encodeURIComponent(size)}/${encodeURIComponent(color)}`,{method:'POST'});if(!response.ok)throw new Error('Failed to reset');};return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Threshold Manager\"}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-sm\",children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:loadAll,className:\"px-3 py-2 bg-blue-600 text-white rounded mb-4\",children:\"Refresh\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:items.map((it,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"border rounded p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:it.item_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[it.size,\" \\u2022 \",it.color,\" \\u2022 threshold: \",it.threshold]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 border rounded\",onClick:()=>fetchOptions(it.item_name),children:\"Options\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 border rounded\",onClick:()=>saveThreshold(it.item_name,it.size,it.color,it.threshold),children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 border rounded\",onClick:()=>resetThreshold(it.item_name,it.size,it.color),children:\"Reset\"})]})]},idx))}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-sm\",children:[\"Options: colors \",options.colors.length,\", sizes \",options.sizes.length]})]});};export default ThresholdManager;","map":{"version":3,"names":["React","useEffect","useState","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","ThresholdManager","items","setItems","options","setOptions","colors","sizes","loading","setLoading","error","setError","loadAll","response","fetch","data","json","thresholds","e","fetchOptions","name","res","encodeURIComponent","saveThreshold","itemName","size","color","threshold","body","item_name","method","headers","JSON","stringify","ok","Error","resetThreshold","className","children","onClick","map","it","idx","length"],"sources":["/Users/SarthakSethi/SOFTWARE FOR DANIER /danier-stock-alert/frontend/src/components/ThresholdManager.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { API_BASE_URL } from '../config';\n\nconst ThresholdManager = () => {\n  const [items, setItems] = useState([]);\n  const [options, setOptions] = useState({ colors: [], sizes: [] });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  const loadAll = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await fetch(`${API_BASE_URL}/thresholds/all`);\n      const data = await response.json();\n      setItems(data.thresholds || []);\n    } catch (e) {\n      setError('Failed to load thresholds');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { loadAll(); }, []);\n\n  const fetchOptions = async (name) => {\n    try {\n      const res = await fetch(`${API_BASE_URL}/key-items/options/${encodeURIComponent(name)}`);\n      const data = await res.json();\n      setOptions({ colors: data.colors || [], sizes: data.sizes || [] });\n    } catch (e) {\n      // ignore\n    }\n  };\n\n  const saveThreshold = async (itemName, size, color, threshold) => {\n    const body = { item_name: itemName, size, color, threshold };\n    const response = await fetch(`${API_BASE_URL}/thresholds/set`, {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(body)\n    });\n    if (!response.ok) throw new Error('Failed to save');\n  };\n\n  const resetThreshold = async (itemName, size, color) => {\n    const response = await fetch(`${API_BASE_URL}/thresholds/reset/${encodeURIComponent(itemName)}/${encodeURIComponent(size)}/${encodeURIComponent(color)}`, {\n      method: 'POST'\n    });\n    if (!response.ok) throw new Error('Failed to reset');\n  };\n\n  return (\n    <div className=\"p-6\">\n      <h2 className=\"text-xl font-semibold mb-4\">Threshold Manager</h2>\n      {loading && <div>Loading...</div>}\n      {error && <div className=\"text-red-600 text-sm\">{error}</div>}\n      <button onClick={loadAll} className=\"px-3 py-2 bg-blue-600 text-white rounded mb-4\">Refresh</button>\n      <ul className=\"space-y-2\">\n        {items.map((it, idx) => (\n          <li key={idx} className=\"border rounded p-3\">\n            <div className=\"font-semibold\">{it.item_name}</div>\n            <div className=\"text-sm text-gray-600\">{it.size} • {it.color} • threshold: {it.threshold}</div>\n            <div className=\"mt-2 flex gap-2\">\n              <button className=\"px-2 py-1 border rounded\" onClick={() => fetchOptions(it.item_name)}>Options</button>\n              <button className=\"px-2 py-1 border rounded\" onClick={() => saveThreshold(it.item_name, it.size, it.color, it.threshold)}>Save</button>\n              <button className=\"px-2 py-1 border rounded\" onClick={() => resetThreshold(it.item_name, it.size, it.color)}>Reset</button>\n            </div>\n          </li>\n        ))}\n      </ul>\n      <div className=\"mt-4 text-sm\">\n        Options: colors {options.colors.length}, sizes {options.sizes.length}\n      </div>\n    </div>\n  );\n};\n\nexport default ThresholdManager; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}