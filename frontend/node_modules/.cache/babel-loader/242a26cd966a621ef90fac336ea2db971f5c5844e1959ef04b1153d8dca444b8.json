{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{getSpecificKeyItemAlerts,getAllKeyItemsWithAlerts,sendItemSpecificAlert}from'../services/api';import{ChevronDown,ChevronUp,AlertTriangle,Package,Mail,RefreshCw,Send,Search as SearchIcon}from'lucide-react';import{API_BASE_URL}from'../config';// Add new API call for key items alerts\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const getKeyItemsSummary=async()=>{const controller=new AbortController();const timer=setTimeout(()=>controller.abort(),4000);try{const response=await fetch(`${API_BASE_URL}/key-items/summary`,{signal:controller.signal});if(!response.ok){throw new Error('Failed to fetch key items summary');}return response.json();}finally{clearTimeout(timer);}};const Dashboard=()=>{const[keyItems,setKeyItems]=useState([]);const[loading,setLoading]=useState(true);const[expandedItems,setExpandedItems]=useState({});const[alerts,setAlerts]=useState({});const[loadingAlerts,setLoadingAlerts]=useState({});const[searchTerm,setSearchTerm]=useState('');const[searching,setSearching]=useState(false);const itemRefs=useRef({});const[error,setError]=useState(null);const scrollToItem=name=>{const el=itemRefs.current[name];if(el&&typeof el.scrollIntoView==='function'){setTimeout(()=>el.scrollIntoView({behavior:'smooth',block:'start'}),50);}};// Load key items on component mount\nuseEffect(()=>{loadKeyItems();},[]);// Auto-refresh when component becomes visible (e.g., returning from upload)\nuseEffect(()=>{const handleVisibilityChange=()=>{if(!document.hidden){console.log('🔄 Dashboard visible - refreshing data...');loadKeyItems();}};const handleFocus=()=>{console.log('🔄 Dashboard focused - refreshing data...');loadKeyItems();};const handleThresholdsUpdated=()=>{console.log('🔄 Thresholds updated - refreshing dashboard...');loadKeyItems();};// Listen for page visibility changes and window focus\ndocument.addEventListener('visibilitychange',handleVisibilityChange);window.addEventListener('focus',handleFocus);window.addEventListener('thresholdsUpdated',handleThresholdsUpdated);return()=>{document.removeEventListener('visibilitychange',handleVisibilityChange);window.removeEventListener('focus',handleFocus);window.removeEventListener('thresholdsUpdated',handleThresholdsUpdated);};},[]);const loadKeyItems=async()=>{try{setLoading(true);console.log('🚀 Loading key items with ultra-fast batch processing...');// Use single ultra-fast batch call\nconst batch=await getAllKeyItemsWithAlerts();const arr=(batch.key_items||[]).map(k=>({name:k.name,total_stock:k.total_stock,variants_count:(k.alerts||[]).length,low_stock_count:k.alert_count}));if(arr&&arr.length>0){const sorted=[...arr].sort((a,b)=>(a.name||'').localeCompare(b.name||''));setKeyItems(sorted);console.log(`✅ Loaded ${sorted.length} items with ${sorted.reduce((sum,item)=>sum+(item.low_stock_count||0),0)} total alerts`);}else{console.log('⚠️ No items loaded');setKeyItems([]);// Check if this is a \"no files\" situation and show helpful message\nif(batch.message&&batch.message.includes('No inventory files found')){setError({type:'no-files',message:batch.message,help:batch.help});}}}catch(error){console.error('❌ Error loading key items:',error);setKeyItems([]);setError({type:'error',message:'Failed to load inventory data. Please try refreshing the page.'});}finally{setLoading(false);}};const handleQuickSearch=async()=>{const raw=searchTerm.trim();if(!raw)return;const term=raw.toUpperCase();try{setSearching(true);// Prefer cached batch\nconst batch=await getAllKeyItemsWithAlerts();const list=batch.key_items||[];let item=list.find(x=>(x.name||'').toUpperCase()===term);if(!item)item=list.find(x=>(x.name||'').toUpperCase().includes(term));let alertsList=[];if(item){alertsList=(item.alerts||[]).map(a=>({...a,current_stock:a.stock_level}));setExpandedItems({[item.name]:true});setAlerts(prev=>({...prev,[item.name]:alertsList}));scrollToItem(item.name);return;}// Fallback to backend search endpoint\nconst res=await fetch(`${API_BASE_URL}/search/article/${encodeURIComponent(raw)}`);const data=await res.json();const results=data.results||[];if(results.length>0){const chosen=(results[0].item_name||'').toUpperCase();alertsList=results.filter(r=>(r.item_name||'').toUpperCase()===chosen).map(r=>({item_name:r.item_name,color:r.color,size:r.size,current_stock:r.current_stock,required_threshold:r.required_threshold,shortage:r.shortage}));const displayName=results[0].item_name;setExpandedItems({[displayName]:true});setAlerts(prev=>({...prev,[displayName]:alertsList}));// Ensure the item appears in the list so user sees it\nif(!keyItems.find(k=>k.name===displayName)){setKeyItems(prev=>[{name:displayName,total_stock:undefined,variants_count:alertsList.length,low_stock_count:alertsList.length},...prev]);}scrollToItem(displayName);}else{alert('No results found for that article.');}}catch(e){console.error('Search failed',e);alert('Search failed. Please try again.');}finally{setSearching(false);}};const loadAlertsForItem=async itemName=>{if(alerts[itemName])return;// Already loaded\ntry{setLoadingAlerts(prev=>({...prev,[itemName]:true}));// Use cached batch alerts so we get required_threshold and shortage\nconst batch=await getAllKeyItemsWithAlerts();const item=(batch.key_items||[]).find(x=>x.name===itemName);const list=item?(item.alerts||[]).map(a=>({...a,current_stock:a.stock_level})):[];setAlerts(prev=>({...prev,[itemName]:list}));}catch(error){console.error(`Error loading alerts for ${itemName}:`,error);}finally{setLoadingAlerts(prev=>({...prev,[itemName]:false}));}};const toggleExpanded=async itemName=>{const isExpanding=!expandedItems[itemName];setExpandedItems(prev=>({...prev,[itemName]:isExpanding}));// Load alerts when expanding for the first time\nif(isExpanding&&!alerts[itemName]){await loadAlertsForItem(itemName);}if(isExpanding)scrollToItem(itemName);};const getTotalAlerts=()=>{if(!Array.isArray(keyItems))return 0;return keyItems.reduce((total,item)=>total+(item.low_stock_count||0),0);};const getUrgencyLevel=shortage=>{if(shortage>=10)return{color:'text-red-600',bg:'bg-red-50',label:'CRITICAL'};if(shortage>=5)return{color:'text-orange-600',bg:'bg-orange-50',label:'HIGH'};return{color:'text-yellow-600',bg:'bg-yellow-50',label:'MEDIUM'};};const handleSendEmail=async(itemName,e)=>{e.stopPropagation();// Prevent expanding the item\n// Immediate fast popup\nalert(`Creating email for ${itemName}... It will be sent within ~10 seconds.`);// Fire and continue without blocking UI\ntry{sendItemSpecificAlert(itemName).catch(()=>{/* no-op background */});}catch(error){console.error('Error sending email:',error);// Swallow, background already launched\n}};if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center h-64\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-3 text-lg text-gray-600\",children:\"Loading inventory alerts...\"})]})});}// Show helpful error message when no files are found\nif(error&&error.type==='no-files'){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-8 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-16 h-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"No Inventory Data Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:error.message})]}),error.help&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-6 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-blue-800 mb-4\",children:error.help.title}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:error.help.steps.map((step,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5\",children:index+1}),/*#__PURE__*/_jsx(\"p\",{className:\"text-blue-700\",children:step})]},index))})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-yellow-50 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-yellow-800 text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Tip:\"}),\" Make sure your inventory file is in Excel format (.xlsx) and contains the required columns.\"]})})]})});}// Show general error message\nif(error&&error.type==='error'){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-8 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-16 h-16 text-red-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 mb-2\",children:\"Something went wrong\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:error.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setError(null);loadKeyItems();},className:\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\",children:\"Try Again\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto p-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white dark:bg-zinc-900 rounded-lg shadow-lg p-6 mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-8 h-8 text-blue-600 mr-3\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-800 dark:text-yellow-200\",children:\"Key Items Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Monitor low stock alerts for critical inventory items\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(SearchIcon,{className:\"w-4 h-4 text-gray-500\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),onKeyDown:e=>e.key==='Enter'&&handleQuickSearch(),placeholder:\"Quick search article...\",className:\"bg-transparent outline-none text-sm w-48 dark:text-yellow-100\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleQuickSearch,disabled:searching||!searchTerm.trim(),className:\"text-xs px-2 py-1 bg-blue-600 text-white rounded-md disabled:opacity-50\",children:\"Go\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:loadKeyItems,disabled:loading,className:\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\",children:[/*#__PURE__*/_jsx(RefreshCw,{className:`w-4 h-4 mr-2 ${loading?'animate-spin':''}`}),loading?'Refreshing...':'Refresh']}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-2xl font-bold text-red-600\",children:getTotalAlerts()}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:\"Total Low Stock Items\"})]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:keyItems.map(item=>/*#__PURE__*/_jsxs(\"div\",{ref:el=>{itemRefs.current[item.name]=el;},className:\"bg-white dark:bg-zinc-900 rounded-lg shadow-md overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:`p-6 cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-zinc-800 ${item.low_stock_count>0?'border-l-4 border-red-500':'border-l-4 border-green-500'}`,onClick:()=>toggleExpanded(item.name),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mr-4\",children:item.low_stock_count>0?/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-6 h-6 text-red-600\"}):/*#__PURE__*/_jsx(Package,{className:\"w-6 h-6 text-green-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 dark:text-yellow-100\",children:item.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300\",children:item.low_stock_count>0?`${item.low_stock_count} variants need attention`:'All variants have adequate stock'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[item.low_stock_count>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium mr-4\",children:[item.low_stock_count,\" alerts\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>handleSendEmail(item.name,e),className:\"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors mr-4\",title:\"Send email alert for this item\",children:/*#__PURE__*/_jsx(Send,{className:\"w-4 h-4\"})})]}),expandedItems[item.name]?/*#__PURE__*/_jsx(ChevronUp,{className:\"w-5 h-5 text-gray-400\"}):/*#__PURE__*/_jsx(ChevronDown,{className:\"w-5 h-5 text-gray-400\"})]})]})}),expandedItems[item.name]&&/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 dark:border-zinc-700\",children:loadingAlerts[item.name]?/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-600 mt-2 dark:text-gray-300\",children:[\"Loading alerts for \",item.name,\"...\"]})]}):alerts[item.name]&&alerts[item.name].length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"h4\",{className:\"text-lg font-semibold text-gray-800 dark:text-yellow-200\",children:[\"Low Stock Details - \",item.name]}),/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5 text-blue-600\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-zinc-800\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Color\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Size\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Current Stock\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Required\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Shortage\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\",children:\"Priority\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white dark:bg-zinc-900 divide-y divide-gray-200 dark:divide-zinc-700\",children:alerts[item.name].map((alert,index)=>{const urgency=getUrgencyLevel(alert.shortage);return/*#__PURE__*/_jsxs(\"tr\",{className:\"hover:bg-gray-50 dark:hover:bg-zinc-800\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm font-medium text-gray-900 dark:text-yellow-100\",children:alert.color}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-700 dark:text-gray-300\",children:alert.size}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-700 dark:text-gray-300\",children:alert.current_stock}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3 text-sm text-gray-700 dark:text-gray-300\",children:alert.required_threshold}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-4 py-3 text-sm font-semibold text-red-600\",children:[\"-\",alert.shortage]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-3\",children:/*#__PURE__*/_jsx(\"span\",{className:`px-2 py-1 text-xs font-medium rounded-full ${urgency.bg} ${urgency.color}`,children:urgency.label})})]},index);})})]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 text-center text-gray-600 dark:text-gray-300\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-12 h-12 text-green-500 mx-auto mb-2\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"All variants for \",item.name,\" have adequate stock levels\"]})]})})]},item.name))}),keyItems.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white dark:bg-zinc-900 rounded-lg shadow-md p-12 text-center\",children:[/*#__PURE__*/_jsx(Package,{className:\"w-16 h-16 text-gray-400 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-700 dark:text-yellow-100 mb-2\",children:\"No Inventory Data\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 dark:text-gray-300\",children:\"Upload an inventory report to see key items stock levels and alerts\"})]})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","useRef","getSpecificKeyItemAlerts","getAllKeyItemsWithAlerts","sendItemSpecificAlert","ChevronDown","ChevronUp","AlertTriangle","Package","Mail","RefreshCw","Send","Search","SearchIcon","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","getKeyItemsSummary","controller","AbortController","timer","setTimeout","abort","response","fetch","signal","ok","Error","json","clearTimeout","Dashboard","keyItems","setKeyItems","loading","setLoading","expandedItems","setExpandedItems","alerts","setAlerts","loadingAlerts","setLoadingAlerts","searchTerm","setSearchTerm","searching","setSearching","itemRefs","error","setError","scrollToItem","name","el","current","scrollIntoView","behavior","block","loadKeyItems","handleVisibilityChange","document","hidden","console","log","handleFocus","handleThresholdsUpdated","addEventListener","window","removeEventListener","batch","arr","key_items","map","k","total_stock","variants_count","length","low_stock_count","alert_count","sorted","sort","a","b","localeCompare","reduce","sum","item","message","includes","type","help","handleQuickSearch","raw","trim","term","toUpperCase","list","find","x","alertsList","current_stock","stock_level","prev","res","encodeURIComponent","data","results","chosen","item_name","filter","r","color","size","required_threshold","shortage","displayName","undefined","alert","e","loadAlertsForItem","itemName","toggleExpanded","isExpanding","getTotalAlerts","Array","isArray","total","getUrgencyLevel","bg","label","handleSendEmail","stopPropagation","catch","className","children","title","steps","step","index","onClick","value","onChange","target","onKeyDown","key","placeholder","disabled","ref","urgency"],"sources":["/Users/SarthakSethi/SOFTWARE FOR DANIER /danier-stock-alert/frontend/src/components/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { getSpecificKeyItemAlerts, getAllKeyItemsWithAlerts, sendItemSpecificAlert } from '../services/api';\nimport { ChevronDown, ChevronUp, AlertTriangle, Package, Mail, RefreshCw, Send, Search as SearchIcon } from 'lucide-react';\nimport { API_BASE_URL } from '../config';\n\n// Add new API call for key items alerts\nconst getKeyItemsSummary = async () => {\n  const controller = new AbortController();\n  const timer = setTimeout(() => controller.abort(), 4000);\n  try {\n    const response = await fetch(`${API_BASE_URL}/key-items/summary`, { signal: controller.signal });\n    if (!response.ok) {\n      throw new Error('Failed to fetch key items summary');\n    }\n    return response.json();\n  } finally {\n    clearTimeout(timer);\n  }\n};\n\nconst Dashboard = () => {\n  const [keyItems, setKeyItems] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [expandedItems, setExpandedItems] = useState({});\n  const [alerts, setAlerts] = useState({});\n  const [loadingAlerts, setLoadingAlerts] = useState({});\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searching, setSearching] = useState(false);\n  const itemRefs = useRef({});\n  const [error, setError] = useState(null);\n\n  const scrollToItem = (name) => {\n    const el = itemRefs.current[name];\n    if (el && typeof el.scrollIntoView === 'function') {\n      setTimeout(() => el.scrollIntoView({ behavior: 'smooth', block: 'start' }), 50);\n    }\n  };\n\n  // Load key items on component mount\n  useEffect(() => {\n    loadKeyItems();\n  }, []);\n\n  // Auto-refresh when component becomes visible (e.g., returning from upload)\n  useEffect(() => {\n    const handleVisibilityChange = () => {\n      if (!document.hidden) {\n        console.log('🔄 Dashboard visible - refreshing data...');\n        loadKeyItems();\n      }\n    };\n\n    const handleFocus = () => {\n      console.log('🔄 Dashboard focused - refreshing data...');\n      loadKeyItems();\n    };\n\n    const handleThresholdsUpdated = () => {\n      console.log('🔄 Thresholds updated - refreshing dashboard...');\n      loadKeyItems();\n    };\n\n    // Listen for page visibility changes and window focus\n    document.addEventListener('visibilitychange', handleVisibilityChange);\n    window.addEventListener('focus', handleFocus);\n    window.addEventListener('thresholdsUpdated', handleThresholdsUpdated);\n\n    return () => {\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n      window.removeEventListener('focus', handleFocus);\n      window.removeEventListener('thresholdsUpdated', handleThresholdsUpdated);\n    };\n  }, []);\n\n  const loadKeyItems = async () => {\n    try {\n      setLoading(true);\n      console.log('🚀 Loading key items with ultra-fast batch processing...');\n\n      // Use single ultra-fast batch call\n      const batch = await getAllKeyItemsWithAlerts();\n      const arr = (batch.key_items || []).map(k => ({\n        name: k.name,\n        total_stock: k.total_stock,\n        variants_count: (k.alerts || []).length,\n        low_stock_count: k.alert_count,\n      }));\n\n      if (arr && arr.length > 0) {\n        const sorted = [...arr].sort((a,b)=> (a.name||'').localeCompare(b.name||''));\n        setKeyItems(sorted);\n        console.log(`✅ Loaded ${sorted.length} items with ${sorted.reduce((sum, item) => sum + (item.low_stock_count || 0), 0)} total alerts`);\n      } else {\n        console.log('⚠️ No items loaded');\n        setKeyItems([]);\n        \n        // Check if this is a \"no files\" situation and show helpful message\n        if (batch.message && batch.message.includes('No inventory files found')) {\n          setError({\n            type: 'no-files',\n            message: batch.message,\n            help: batch.help\n          });\n        }\n      }\n    } catch (error) {\n      console.error('❌ Error loading key items:', error);\n      setKeyItems([]);\n      setError({\n        type: 'error',\n        message: 'Failed to load inventory data. Please try refreshing the page.'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleQuickSearch = async () => {\n    const raw = searchTerm.trim();\n    if (!raw) return;\n    const term = raw.toUpperCase();\n    try {\n      setSearching(true);\n      // Prefer cached batch\n      const batch = await getAllKeyItemsWithAlerts();\n      const list = batch.key_items || [];\n      let item = list.find(x => (x.name || '').toUpperCase() === term);\n      if (!item) item = list.find(x => (x.name || '').toUpperCase().includes(term));\n\n      let alertsList = [];\n      if (item) {\n        alertsList = (item.alerts || []).map(a => ({ ...a, current_stock: a.stock_level }));\n        setExpandedItems({ [item.name]: true });\n        setAlerts(prev => ({ ...prev, [item.name]: alertsList }));\n        scrollToItem(item.name);\n        return;\n      }\n\n      // Fallback to backend search endpoint\n      const res = await fetch(`${API_BASE_URL}/search/article/${encodeURIComponent(raw)}`);\n      const data = await res.json();\n      const results = data.results || [];\n      if (results.length > 0) {\n        const chosen = (results[0].item_name || '').toUpperCase();\n        alertsList = results\n          .filter(r => (r.item_name || '').toUpperCase() === chosen)\n          .map(r => ({\n            item_name: r.item_name,\n            color: r.color,\n            size: r.size,\n            current_stock: r.current_stock,\n            required_threshold: r.required_threshold,\n            shortage: r.shortage,\n          }));\n        const displayName = results[0].item_name;\n        setExpandedItems({ [displayName]: true });\n        setAlerts(prev => ({ ...prev, [displayName]: alertsList }));\n        // Ensure the item appears in the list so user sees it\n        if (!keyItems.find(k => k.name === displayName)) {\n          setKeyItems(prev => [{ name: displayName, total_stock: undefined, variants_count: alertsList.length, low_stock_count: alertsList.length }, ...prev]);\n        }\n        scrollToItem(displayName);\n      } else {\n        alert('No results found for that article.');\n      }\n    } catch (e) {\n      console.error('Search failed', e);\n      alert('Search failed. Please try again.');\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  const loadAlertsForItem = async (itemName) => {\n    if (alerts[itemName]) return; // Already loaded\n    \n    try {\n      setLoadingAlerts(prev => ({ ...prev, [itemName]: true }));\n      // Use cached batch alerts so we get required_threshold and shortage\n      const batch = await getAllKeyItemsWithAlerts();\n      const item = (batch.key_items || []).find(x => x.name === itemName);\n      const list = item ? (item.alerts || []).map(a => ({\n        ...a,\n        current_stock: a.stock_level,\n      })) : [];\n      setAlerts(prev => ({ ...prev, [itemName]: list }));\n    } catch (error) {\n      console.error(`Error loading alerts for ${itemName}:`, error);\n    } finally {\n      setLoadingAlerts(prev => ({ ...prev, [itemName]: false }));\n    }\n  };\n\n  const toggleExpanded = async (itemName) => {\n    const isExpanding = !expandedItems[itemName];\n    \n    setExpandedItems(prev => ({\n      ...prev,\n      [itemName]: isExpanding\n    }));\n\n    // Load alerts when expanding for the first time\n    if (isExpanding && !alerts[itemName]) {\n      await loadAlertsForItem(itemName);\n    }\n    if (isExpanding) scrollToItem(itemName);\n  };\n\n  const getTotalAlerts = () => {\n    if (!Array.isArray(keyItems)) return 0;\n    return keyItems.reduce((total, item) => total + (item.low_stock_count || 0), 0);\n  };\n\n  const getUrgencyLevel = (shortage) => {\n    if (shortage >= 10) return { color: 'text-red-600', bg: 'bg-red-50', label: 'CRITICAL' };\n    if (shortage >= 5) return { color: 'text-orange-600', bg: 'bg-orange-50', label: 'HIGH' };\n    return { color: 'text-yellow-600', bg: 'bg-yellow-50', label: 'MEDIUM' };\n  };\n\n  const handleSendEmail = async (itemName, e) => {\n    e.stopPropagation(); // Prevent expanding the item\n    \n    // Immediate fast popup\n    alert(`Creating email for ${itemName}... It will be sent within ~10 seconds.`);\n    // Fire and continue without blocking UI\n    try {\n      sendItemSpecificAlert(itemName).catch(() => {/* no-op background */});\n    } catch (error) {\n      console.error('Error sending email:', error);\n      // Swallow, background already launched\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n          <span className=\"ml-3 text-lg text-gray-600\">Loading inventory alerts...</span>\n        </div>\n      </div>\n    );\n  }\n\n  // Show helpful error message when no files are found\n  if (error && error.type === 'no-files') {\n    return (\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <div className=\"bg-white rounded-lg shadow-md p-8 text-center\">\n          <div className=\"mb-6\">\n            <Package className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">No Inventory Data Found</h2>\n            <p className=\"text-gray-600 mb-6\">{error.message}</p>\n          </div>\n          \n          {error.help && (\n            <div className=\"bg-blue-50 rounded-lg p-6 mb-6\">\n              <h3 className=\"text-lg font-semibold text-blue-800 mb-4\">{error.help.title}</h3>\n              <div className=\"space-y-3\">\n                {error.help.steps.map((step, index) => (\n                  <div key={index} className=\"flex items-start\">\n                    <div className=\"bg-blue-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5\">\n                      {index + 1}\n                    </div>\n                    <p className=\"text-blue-700\">{step}</p>\n                  </div>\n                ))}\n              </div>\n            </div>\n          )}\n          \n          <div className=\"bg-yellow-50 rounded-lg p-4\">\n            <p className=\"text-yellow-800 text-sm\">\n              <strong>Tip:</strong> Make sure your inventory file is in Excel format (.xlsx) and contains the required columns.\n            </p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Show general error message\n  if (error && error.type === 'error') {\n    return (\n      <div className=\"max-w-7xl mx-auto p-6\">\n        <div className=\"bg-white rounded-lg shadow-md p-8 text-center\">\n          <div className=\"mb-6\">\n            <AlertTriangle className=\"w-16 h-16 text-red-400 mx-auto mb-4\" />\n            <h2 className=\"text-2xl font-bold text-gray-800 mb-2\">Something went wrong</h2>\n            <p className=\"text-gray-600 mb-6\">{error.message}</p>\n          </div>\n          \n          <button \n            onClick={() => {\n              setError(null);\n              loadKeyItems();\n            }}\n            className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors\"\n          >\n            Try Again\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-6\">\n      {/* Header */}\n      <div className=\"bg-white dark:bg-zinc-900 rounded-lg shadow-lg p-6 mb-6\">\n        <div className=\"flex items-center justify-between\">\n          <div className=\"flex items-center\">\n            <Package className=\"w-8 h-8 text-blue-600 mr-3\" />\n            <div>\n              <h1 className=\"text-3xl font-bold text-gray-800 dark:text-yellow-200\">Key Items Dashboard</h1>\n              <p className=\"text-gray-600 dark:text-gray-300\">Monitor low stock alerts for critical inventory items</p>\n            </div>\n          </div>\n          <div className=\"flex items-center gap-4\">\n            {/* Compact Quick Search */}\n            <div className=\"flex items-center gap-2 bg-gray-100 dark:bg-zinc-800 px-3 py-2 rounded-lg\">\n              <SearchIcon className=\"w-4 h-4 text-gray-500\" />\n              <input\n                type=\"text\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                onKeyDown={(e) => e.key === 'Enter' && handleQuickSearch()}\n                placeholder=\"Quick search article...\"\n                className=\"bg-transparent outline-none text-sm w-48 dark:text-yellow-100\"\n              />\n              <button\n                onClick={handleQuickSearch}\n                disabled={searching || !searchTerm.trim()}\n                className=\"text-xs px-2 py-1 bg-blue-600 text-white rounded-md disabled:opacity-50\"\n              >Go</button>\n            </div>\n            <button\n              onClick={loadKeyItems}\n              disabled={loading}\n              className=\"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\n            >\n              <RefreshCw className={`w-4 h-4 mr-2 ${loading ? 'animate-spin' : ''}`} />\n              {loading ? 'Refreshing...' : 'Refresh'}\n            </button>\n            <div className=\"text-right\">\n              <div className=\"text-2xl font-bold text-red-600\">{getTotalAlerts()}</div>\n              <div className=\"text-sm text-gray-600 dark:text-gray-300\">Total Low Stock Items</div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Key Items Grid */}\n      <div className=\"space-y-4\">\n        {keyItems.map((item) => (\n          <div key={item.name} ref={(el)=> { itemRefs.current[item.name] = el; }} className=\"bg-white dark:bg-zinc-900 rounded-lg shadow-md overflow-hidden\">\n            {/* Item Header */}\n            <div \n              className={`p-6 cursor-pointer transition-colors hover:bg-gray-50 dark:hover:bg-zinc-800 ${\n                item.low_stock_count > 0 ? 'border-l-4 border-red-500' : 'border-l-4 border-green-500'\n              }`}\n              onClick={() => toggleExpanded(item.name)}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center\">\n                  <div className=\"mr-4\">\n                    {item.low_stock_count > 0 ? (\n                      <AlertTriangle className=\"w-6 h-6 text-red-600\" />\n                    ) : (\n                      <Package className=\"w-6 h-6 text-green-600\" />\n                    )}\n                  </div>\n                  <div>\n                    <h3 className=\"text-xl font-semibold text-gray-800 dark:text-yellow-100\">{item.name}</h3>\n                    <p className=\"text-gray-600 dark:text-gray-300\">\n                      {item.low_stock_count > 0 \n                        ? `${item.low_stock_count} variants need attention`\n                        : 'All variants have adequate stock'\n                      }\n                    </p>\n                  </div>\n                </div>\n                <div className=\"flex items-center\">\n                  {item.low_stock_count > 0 && (\n                    <>\n                      <span className=\"bg-red-100 text-red-800 px-3 py-1 rounded-full text-sm font-medium mr-4\">\n                        {item.low_stock_count} alerts\n                      </span>\n                      <button\n                        onClick={(e) => handleSendEmail(item.name, e)}\n                        className=\"bg-blue-600 text-white p-2 rounded-lg hover:bg-blue-700 transition-colors mr-4\"\n                        title=\"Send email alert for this item\"\n                      >\n                        <Send className=\"w-4 h-4\" />\n                      </button>\n                    </>\n                  )}\n                  {expandedItems[item.name] ? (\n                    <ChevronUp className=\"w-5 h-5 text-gray-400\" />\n                  ) : (\n                    <ChevronDown className=\"w-5 h-5 text-gray-400\" />\n                  )}\n                </div>\n              </div>\n            </div>\n\n            {/* Expanded Content */}\n            {expandedItems[item.name] && (\n              <div className=\"border-t border-gray-200 dark:border-zinc-700\">\n                {loadingAlerts[item.name] ? (\n                  <div className=\"p-6 text-center\">\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\n                    <p className=\"text-gray-600 mt-2 dark:text-gray-300\">Loading alerts for {item.name}...</p>\n                  </div>\n                ) : alerts[item.name] && alerts[item.name].length > 0 ? (\n                  <div className=\"p-6\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                      <h4 className=\"text-lg font-semibold text-gray-800 dark:text-yellow-200\">\n                        Low Stock Details - {item.name}\n                      </h4>\n                      <Mail className=\"w-5 h-5 text-blue-600\" />\n                    </div>\n                    <div className=\"overflow-x-auto\">\n                      <table className=\"w-full\">\n                        <thead className=\"bg-gray-50 dark:bg-zinc-800\">\n                          <tr>\n                            <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">Color</th>\n                            <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">Size</th>\n                            <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">Current Stock</th>\n                            <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">Required</th>\n                            <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">Shortage</th>\n                            <th className=\"px-4 py-3 text-left text-sm font-medium text-gray-700 dark:text-gray-300\">Priority</th>\n                          </tr>\n                        </thead>\n                        <tbody className=\"bg-white dark:bg-zinc-900 divide-y divide-gray-200 dark:divide-zinc-700\">\n                          {alerts[item.name].map((alert, index) => {\n                            const urgency = getUrgencyLevel(alert.shortage);\n                            return (\n                              <tr key={index} className=\"hover:bg-gray-50 dark:hover:bg-zinc-800\">\n                                <td className=\"px-4 py-3 text-sm font-medium text-gray-900 dark:text-yellow-100\">{alert.color}</td>\n                                <td className=\"px-4 py-3 text-sm text-gray-700 dark:text-gray-300\">{alert.size}</td>\n                                <td className=\"px-4 py-3 text-sm text-gray-700 dark:text-gray-300\">{alert.current_stock}</td>\n                                <td className=\"px-4 py-3 text-sm text-gray-700 dark:text-gray-300\">{alert.required_threshold}</td>\n                                <td className=\"px-4 py-3 text-sm font-semibold text-red-600\">-{alert.shortage}</td>\n                                <td className=\"px-4 py-3\">\n                                  <span className={`px-2 py-1 text-xs font-medium rounded-full ${urgency.bg} ${urgency.color}`}>\n                                    {urgency.label}\n                                  </span>\n                                </td>\n                              </tr>\n                            );\n                          })}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"p-6 text-center text-gray-600 dark:text-gray-300\">\n                    <Package className=\"w-12 h-12 text-green-500 mx-auto mb-2\" />\n                    <p>All variants for {item.name} have adequate stock levels</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {keyItems.length === 0 && (\n        <div className=\"bg-white dark:bg-zinc-900 rounded-lg shadow-md p-12 text-center\">\n          <Package className=\"w-16 h-16 text-gray-400 mx-auto mb-4\" />\n          <h3 className=\"text-xl font-semibold text-gray-700 dark:text-yellow-100 mb-2\">No Inventory Data</h3>\n          <p className=\"text-gray-600 dark:text-gray-300\">\n            Upload an inventory report to see key items stock levels and alerts\n          </p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Dashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}