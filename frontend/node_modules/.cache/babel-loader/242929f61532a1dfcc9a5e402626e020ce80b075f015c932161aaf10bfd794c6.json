{"ast":null,"code":"import React,{useState}from'react';import{useNavigate}from'react-router-dom';import{uploadReport}from'../services/api';import{Upload,AlertCircle,CheckCircle,ArrowRight}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UploadPage=()=>{const[file,setFile]=useState(null);const[uploading,setUploading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState(false);const navigate=useNavigate();const handleFileChange=e=>{const selectedFile=e.target.files[0];if(selectedFile&&selectedFile.name.endsWith('.xlsx')){setFile(selectedFile);setError('');}else{setError('Please select a valid Excel file (.xlsx)');}};const handleUpload=async()=>{if(!file){setError('Please select a file first');return;}setUploading(true);setError('');try{const result=await uploadReport(file);console.log('Upload result:',result);// Show brief success message\nsetSuccess(true);// Auto-redirect to dashboard after 1.5 seconds\nsetTimeout(()=>{navigate('/');},1500);}catch(err){var _err$response,_err$response$data;console.error('Upload error:',err);setError(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.detail)||err.message||'Upload failed. Please try again.');}finally{setUploading(false);}};if(success){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-50 border border-green-200 rounded-lg p-6 text-center\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-16 h-16 text-green-600 mx-auto mb-4\"}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-green-800 mb-2\",children:\"Upload Successful!\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-green-700 mb-4\",children:\"Inventory file processed successfully\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center text-green-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"mr-2\",children:\"Redirecting to Dashboard\"}),/*#__PURE__*/_jsx(ArrowRight,{className:\"w-5 h-5\"})]})]})});}return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-6\",children:[/*#__PURE__*/_jsx(Upload,{className:\"w-8 h-8 text-blue-600 mr-3\"}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-800\",children:\"Upload Inventory Report\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-2 font-medium\",children:\"Upload your daily inventory Excel file\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mb-4\",children:\"\\uD83D\\uDCCB Expected format: Detailed inventory report with Item Description, Variant Color, Variant Code, Grand Total, Season Code\"})]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\",children:[/*#__PURE__*/_jsx(AlertCircle,{className:\"w-5 h-5 text-red-600 inline mr-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inline-block\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-red-800 font-medium\",children:\"Upload Failed\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-red-700 mt-2 whitespace-pre-line\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-3 bg-red-100 rounded border text-sm text-red-800\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uD83D\\uDCA1 File Format Requirements:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"mt-2 list-disc list-inside space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"Must be a detailed inventory report (.xlsx format)\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Should contain columns: Item Description, Variant Color, Variant Code, Grand Total, Season Code\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Should list individual product variants with stock quantities\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Should NOT be a summary/pivot table with unnamed columns\"})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-6\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file-upload\",className:\"hidden\",accept:\".xlsx\",onChange:handleFileChange}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file-upload\",className:\"bg-blue-600 text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-blue-700 transition-colors\",children:\"Choose Excel File (.xlsx)\"}),file&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-3 text-green-600\",children:[\"\\u2705 Selected: \",file.name]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleUpload,disabled:!file||uploading,className:`w-full py-3 px-6 rounded-lg font-medium transition-colors ${!file||uploading?'bg-gray-300 text-gray-500 cursor-not-allowed':'bg-green-600 text-white hover:bg-green-700'}`,children:uploading?/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"}),\"Processing Inventory...\"]}):'Upload & Process'}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center text-sm text-gray-500\",children:\"\\uD83D\\uDCCA After upload, you'll be redirected to the Dashboard to view all low stock alerts\"})]})});};export default UploadPage;","map":{"version":3,"names":["React","useState","useNavigate","uploadReport","Upload","AlertCircle","CheckCircle","ArrowRight","jsx","_jsx","jsxs","_jsxs","UploadPage","file","setFile","uploading","setUploading","error","setError","success","setSuccess","navigate","handleFileChange","e","selectedFile","target","files","name","endsWith","handleUpload","result","console","log","setTimeout","err","_err$response","_err$response$data","response","data","detail","message","className","children","type","id","accept","onChange","htmlFor","onClick","disabled"],"sources":["/Users/SarthakSethi/SOFTWARE FOR DANIER /danier-stock-alert/frontend/src/components/UploadPage.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { uploadReport } from '../services/api';\nimport { Upload, AlertCircle, CheckCircle, ArrowRight } from 'lucide-react';\n\nconst UploadPage = () => {\n  const [file, setFile] = useState(null);\n  const [uploading, setUploading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n  const navigate = useNavigate();\n\n  const handleFileChange = (e) => {\n    const selectedFile = e.target.files[0];\n    if (selectedFile && selectedFile.name.endsWith('.xlsx')) {\n      setFile(selectedFile);\n      setError('');\n    } else {\n      setError('Please select a valid Excel file (.xlsx)');\n    }\n  };\n\n  const handleUpload = async () => {\n    if (!file) {\n      setError('Please select a file first');\n      return;\n    }\n\n    setUploading(true);\n    setError('');\n\n    try {\n      const result = await uploadReport(file);\n      console.log('Upload result:', result);\n      \n      // Show brief success message\n      setSuccess(true);\n      \n      // Auto-redirect to dashboard after 1.5 seconds\n      setTimeout(() => {\n        navigate('/');\n      }, 1500);\n      \n    } catch (err) {\n      console.error('Upload error:', err);\n      setError(err.response?.data?.detail || err.message || 'Upload failed. Please try again.');\n    } finally {\n      setUploading(false);\n    }\n  };\n\n  if (success) {\n    return (\n      <div className=\"max-w-2xl mx-auto p-6\">\n        <div className=\"bg-green-50 border border-green-200 rounded-lg p-6 text-center\">\n          <CheckCircle className=\"w-16 h-16 text-green-600 mx-auto mb-4\" />\n          <h2 className=\"text-2xl font-bold text-green-800 mb-2\">Upload Successful!</h2>\n          <p className=\"text-green-700 mb-4\">Inventory file processed successfully</p>\n          <div className=\"flex items-center justify-center text-green-600\">\n            <span className=\"mr-2\">Redirecting to Dashboard</span>\n            <ArrowRight className=\"w-5 h-5\" />\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-6\">\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <div className=\"flex items-center mb-6\">\n          <Upload className=\"w-8 h-8 text-blue-600 mr-3\" />\n          <h1 className=\"text-2xl font-bold text-gray-800\">Upload Inventory Report</h1>\n        </div>\n\n        <div className=\"mb-6\">\n          <p className=\"text-gray-600 mb-2 font-medium\">Upload your daily inventory Excel file</p>\n          <p className=\"text-sm text-gray-500 mb-4\">\n            ðŸ“‹ Expected format: Detailed inventory report with Item Description, Variant Color, Variant Code, Grand Total, Season Code\n          </p>\n        </div>\n\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg\">\n            <AlertCircle className=\"w-5 h-5 text-red-600 inline mr-2\" />\n            <div className=\"inline-block\">\n              <span className=\"text-red-800 font-medium\">Upload Failed</span>\n              <div className=\"text-red-700 mt-2 whitespace-pre-line\">{error}</div>\n              <div className=\"mt-3 p-3 bg-red-100 rounded border text-sm text-red-800\">\n                <strong>ðŸ’¡ File Format Requirements:</strong>\n                <ul className=\"mt-2 list-disc list-inside space-y-1\">\n                  <li>Must be a detailed inventory report (.xlsx format)</li>\n                  <li>Should contain columns: Item Description, Variant Color, Variant Code, Grand Total, Season Code</li>\n                  <li>Should list individual product variants with stock quantities</li>\n                  <li>Should NOT be a summary/pivot table with unnamed columns</li>\n                </ul>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center mb-6\">\n          <input\n            type=\"file\"\n            id=\"file-upload\"\n            className=\"hidden\"\n            accept=\".xlsx\"\n            onChange={handleFileChange}\n          />\n          <label htmlFor=\"file-upload\" className=\"bg-blue-600 text-white px-6 py-2 rounded-lg cursor-pointer hover:bg-blue-700 transition-colors\">\n            Choose Excel File (.xlsx)\n          </label>\n          {file && (\n            <p className=\"mt-3 text-green-600\">\n              âœ… Selected: {file.name}\n            </p>\n          )}\n        </div>\n\n        <button\n          onClick={handleUpload}\n          disabled={!file || uploading}\n          className={`w-full py-3 px-6 rounded-lg font-medium transition-colors ${\n            !file || uploading\n              ? 'bg-gray-300 text-gray-500 cursor-not-allowed'\n              : 'bg-green-600 text-white hover:bg-green-700'\n          }`}\n        >\n          {uploading ? (\n            <div className=\"flex items-center justify-center\">\n              <div className=\"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2\"></div>\n              Processing Inventory...\n            </div>\n          ) : (\n            'Upload & Process'\n          )}\n        </button>\n\n        <div className=\"mt-4 text-center text-sm text-gray-500\">\n          ðŸ“Š After upload, you'll be redirected to the Dashboard to view all low stock alerts\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default UploadPage; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,YAAY,KAAQ,iBAAiB,CAC9C,OAASC,MAAM,CAAEC,WAAW,CAAEC,WAAW,CAAEC,UAAU,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5E,KAAM,CAAAC,UAAU,CAAGA,CAAA,GAAM,CACvB,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACc,SAAS,CAAEC,YAAY,CAAC,CAAGf,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACgB,KAAK,CAAEC,QAAQ,CAAC,CAAGjB,QAAQ,CAAC,EAAE,CAAC,CACtC,KAAM,CAACkB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAAoB,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAoB,gBAAgB,CAAIC,CAAC,EAAK,CAC9B,KAAM,CAAAC,YAAY,CAAGD,CAAC,CAACE,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CACtC,GAAIF,YAAY,EAAIA,YAAY,CAACG,IAAI,CAACC,QAAQ,CAAC,OAAO,CAAC,CAAE,CACvDd,OAAO,CAACU,YAAY,CAAC,CACrBN,QAAQ,CAAC,EAAE,CAAC,CACd,CAAC,IAAM,CACLA,QAAQ,CAAC,0CAA0C,CAAC,CACtD,CACF,CAAC,CAED,KAAM,CAAAW,YAAY,CAAG,KAAAA,CAAA,GAAY,CAC/B,GAAI,CAAChB,IAAI,CAAE,CACTK,QAAQ,CAAC,4BAA4B,CAAC,CACtC,OACF,CAEAF,YAAY,CAAC,IAAI,CAAC,CAClBE,QAAQ,CAAC,EAAE,CAAC,CAEZ,GAAI,CACF,KAAM,CAAAY,MAAM,CAAG,KAAM,CAAA3B,YAAY,CAACU,IAAI,CAAC,CACvCkB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAEF,MAAM,CAAC,CAErC;AACAV,UAAU,CAAC,IAAI,CAAC,CAEhB;AACAa,UAAU,CAAC,IAAM,CACfZ,QAAQ,CAAC,GAAG,CAAC,CACf,CAAC,CAAE,IAAI,CAAC,CAEV,CAAE,MAAOa,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZL,OAAO,CAACd,KAAK,CAAC,eAAe,CAAEiB,GAAG,CAAC,CACnChB,QAAQ,CAAC,EAAAiB,aAAA,CAAAD,GAAG,CAACG,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcG,IAAI,UAAAF,kBAAA,iBAAlBA,kBAAA,CAAoBG,MAAM,GAAIL,GAAG,CAACM,OAAO,EAAI,kCAAkC,CAAC,CAC3F,CAAC,OAAS,CACRxB,YAAY,CAAC,KAAK,CAAC,CACrB,CACF,CAAC,CAED,GAAIG,OAAO,CAAE,CACX,mBACEV,IAAA,QAAKgC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpC/B,KAAA,QAAK8B,SAAS,CAAC,gEAAgE,CAAAC,QAAA,eAC7EjC,IAAA,CAACH,WAAW,EAACmC,SAAS,CAAC,uCAAuC,CAAE,CAAC,cACjEhC,IAAA,OAAIgC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,oBAAkB,CAAI,CAAC,cAC9EjC,IAAA,MAAGgC,SAAS,CAAC,qBAAqB,CAAAC,QAAA,CAAC,uCAAqC,CAAG,CAAC,cAC5E/B,KAAA,QAAK8B,SAAS,CAAC,iDAAiD,CAAAC,QAAA,eAC9DjC,IAAA,SAAMgC,SAAS,CAAC,MAAM,CAAAC,QAAA,CAAC,0BAAwB,CAAM,CAAC,cACtDjC,IAAA,CAACF,UAAU,EAACkC,SAAS,CAAC,SAAS,CAAE,CAAC,EAC/B,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAEA,mBACEhC,IAAA,QAAKgC,SAAS,CAAC,uBAAuB,CAAAC,QAAA,cACpC/B,KAAA,QAAK8B,SAAS,CAAC,mCAAmC,CAAAC,QAAA,eAChD/B,KAAA,QAAK8B,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCjC,IAAA,CAACL,MAAM,EAACqC,SAAS,CAAC,4BAA4B,CAAE,CAAC,cACjDhC,IAAA,OAAIgC,SAAS,CAAC,kCAAkC,CAAAC,QAAA,CAAC,yBAAuB,CAAI,CAAC,EAC1E,CAAC,cAEN/B,KAAA,QAAK8B,SAAS,CAAC,MAAM,CAAAC,QAAA,eACnBjC,IAAA,MAAGgC,SAAS,CAAC,gCAAgC,CAAAC,QAAA,CAAC,wCAAsC,CAAG,CAAC,cACxFjC,IAAA,MAAGgC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,CAAC,sIAE1C,CAAG,CAAC,EACD,CAAC,CAELzB,KAAK,eACJN,KAAA,QAAK8B,SAAS,CAAC,qDAAqD,CAAAC,QAAA,eAClEjC,IAAA,CAACJ,WAAW,EAACoC,SAAS,CAAC,kCAAkC,CAAE,CAAC,cAC5D9B,KAAA,QAAK8B,SAAS,CAAC,cAAc,CAAAC,QAAA,eAC3BjC,IAAA,SAAMgC,SAAS,CAAC,0BAA0B,CAAAC,QAAA,CAAC,eAAa,CAAM,CAAC,cAC/DjC,IAAA,QAAKgC,SAAS,CAAC,uCAAuC,CAAAC,QAAA,CAAEzB,KAAK,CAAM,CAAC,cACpEN,KAAA,QAAK8B,SAAS,CAAC,yDAAyD,CAAAC,QAAA,eACtEjC,IAAA,WAAAiC,QAAA,CAAQ,wCAA4B,CAAQ,CAAC,cAC7C/B,KAAA,OAAI8B,SAAS,CAAC,sCAAsC,CAAAC,QAAA,eAClDjC,IAAA,OAAAiC,QAAA,CAAI,oDAAkD,CAAI,CAAC,cAC3DjC,IAAA,OAAAiC,QAAA,CAAI,iGAA+F,CAAI,CAAC,cACxGjC,IAAA,OAAAiC,QAAA,CAAI,+DAA6D,CAAI,CAAC,cACtEjC,IAAA,OAAAiC,QAAA,CAAI,0DAAwD,CAAI,CAAC,EAC/D,CAAC,EACF,CAAC,EACH,CAAC,EACH,CACN,cAED/B,KAAA,QAAK8B,SAAS,CAAC,wEAAwE,CAAAC,QAAA,eACrFjC,IAAA,UACEkC,IAAI,CAAC,MAAM,CACXC,EAAE,CAAC,aAAa,CAChBH,SAAS,CAAC,QAAQ,CAClBI,MAAM,CAAC,OAAO,CACdC,QAAQ,CAAExB,gBAAiB,CAC5B,CAAC,cACFb,IAAA,UAAOsC,OAAO,CAAC,aAAa,CAACN,SAAS,CAAC,gGAAgG,CAAAC,QAAA,CAAC,2BAExI,CAAO,CAAC,CACP7B,IAAI,eACHF,KAAA,MAAG8B,SAAS,CAAC,qBAAqB,CAAAC,QAAA,EAAC,mBACrB,CAAC7B,IAAI,CAACc,IAAI,EACrB,CACJ,EACE,CAAC,cAENlB,IAAA,WACEuC,OAAO,CAAEnB,YAAa,CACtBoB,QAAQ,CAAE,CAACpC,IAAI,EAAIE,SAAU,CAC7B0B,SAAS,CAAE,6DACT,CAAC5B,IAAI,EAAIE,SAAS,CACd,8CAA8C,CAC9C,4CAA4C,EAC/C,CAAA2B,QAAA,CAEF3B,SAAS,cACRJ,KAAA,QAAK8B,SAAS,CAAC,kCAAkC,CAAAC,QAAA,eAC/CjC,IAAA,QAAKgC,SAAS,CAAC,gEAAgE,CAAM,CAAC,0BAExF,EAAK,CAAC,CAEN,kBACD,CACK,CAAC,cAEThC,IAAA,QAAKgC,SAAS,CAAC,wCAAwC,CAAAC,QAAA,CAAC,+FAExD,CAAK,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAA9B,UAAU","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}