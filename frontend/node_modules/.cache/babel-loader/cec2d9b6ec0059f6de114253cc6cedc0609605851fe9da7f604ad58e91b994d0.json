{"ast":null,"code":"import React,{useEffect,useState}from'react';import{API_BASE_URL}from'../config';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ThresholdManager=()=>{const[items,setItems]=useState([]);const[overrides,setOverrides]=useState([]);const[options,setOptions]=useState({colors:[],sizes:[],color_to_sizes:{},size_to_colors:{}});const[loading,setLoading]=useState(false);const[error,setError]=useState('');// Create form state\nconst[itemName,setItemName]=useState('');const[availableItemNames,setAvailableItemNames]=useState([]);const[size,setSize]=useState('');const[color,setColor]=useState('');const[threshold,setThreshold]=useState('');// History\nconst[history,setHistory]=useState([]);const loadAll=async()=>{setLoading(true);setError('');try{const response=await fetch(`${API_BASE_URL}/thresholds/all`);const data=await response.json();let list=[];if(Array.isArray(data.custom_thresholds)){list=data.custom_thresholds;}else if(data.raw_thresholds&&typeof data.raw_thresholds==='object'){list=Object.entries(data.raw_thresholds).map(_ref=>{let[key,threshold]=_ref;const[item_name,size,color]=key.split('|');return{key,item_name,size,color,threshold};});}setItems(list);// Try to fetch overrides directly (if backend deployed)\ntry{const o=await fetch(`${API_BASE_URL}/thresholds/overrides`);if(o.ok){const oj=await o.json();setOverrides(oj.overrides||[]);}}catch{}}catch(e){setError('Failed to load thresholds');}finally{setLoading(false);}};useEffect(()=>{loadAll();},[]);const loadItemNames=async()=>{try{const res=await fetch(`${API_BASE_URL}/key-items/summary`);const data=await res.json();const names=(data.key_items||[]).map(k=>k.name).filter(Boolean).sort();setAvailableItemNames(names);}catch{}};const fetchOptions=async name=>{try{const res=await fetch(`${API_BASE_URL}/key-items/options/${encodeURIComponent(name)}`);const data=await res.json();setOptions({colors:data.colors||[],sizes:data.sizes||[],color_to_sizes:data.color_to_sizes||{},size_to_colors:data.size_to_colors||{}});}catch(e){setOptions({colors:[],sizes:[],color_to_sizes:{},size_to_colors:{}});}};const saveThreshold=async(itemName,size,color,threshold)=>{const form=new FormData();form.append('item_name',itemName);form.append('size',size);form.append('color',color);form.append('threshold',String(threshold));const response=await fetch(`${API_BASE_URL}/thresholds/set`,{method:'POST',body:form});if(!response.ok)throw new Error('Failed to save');window.dispatchEvent(new CustomEvent('thresholdsUpdated'));await loadAll();await loadHistory(itemName);};const resetThreshold=async(itemName,size,color)=>{const response=await fetch(`${API_BASE_URL}/thresholds/reset/${encodeURIComponent(itemName)}/${encodeURIComponent(size)}/${encodeURIComponent(color)}`,{method:'DELETE'});if(!response.ok)throw new Error('Failed to reset');window.dispatchEvent(new CustomEvent('thresholdsUpdated'));await loadAll();await loadHistory(itemName);};const loadHistory=async name=>{try{const res=await fetch(`${API_BASE_URL}/thresholds/history?item_name=${encodeURIComponent(name)}&limit=50`);if(!res.ok){setHistory([]);return;}const data=await res.json();setHistory(data.history||[]);}catch{setHistory([]);}};// Derived filtered options for UX\nconst sizesForColor=color&&options.color_to_sizes[color]?options.color_to_sizes[color]:options.sizes;const colorsForSize=size&&options.size_to_colors[size]?options.size_to_colors[size]:options.colors;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold mb-4\",children:\"Threshold Manager\"}),loading&&/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"text-red-600 text-sm\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded border p-4 mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold mb-3\",children:\"Create or Update Threshold\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-5 gap-2 items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-span-2 flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:itemName,onChange:e=>{setItemName(e.target.value);setSize('');setColor('');setOptions({colors:[],sizes:[],color_to_sizes:{},size_to_colors:{}});},placeholder:\"Item name (e.g., RONAN)\",className:\"flex-1 border rounded px-3 py-2\",onFocus:loadItemNames,onBlur:()=>{/* keep */},list:\"itemNames\"}),/*#__PURE__*/_jsx(\"datalist\",{id:\"itemNames\",children:availableItemNames.map(n=>/*#__PURE__*/_jsx(\"option\",{value:n},n))}),/*#__PURE__*/_jsx(\"button\",{className:\"px-3 py-2 border rounded\",onClick:()=>{if(itemName.trim()){fetchOptions(itemName.trim());loadHistory(itemName.trim());}},children:\"Options\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:size,onChange:e=>setSize(e.target.value),className:\"border rounded px-2 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Size\"}),sizesForColor.map(s=>/*#__PURE__*/_jsx(\"option\",{value:s,children:s},s))]}),/*#__PURE__*/_jsxs(\"select\",{value:color,onChange:e=>setColor(e.target.value),className:\"border rounded px-2 py-2\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Color\"}),colorsForSize.map(c=>/*#__PURE__*/_jsx(\"option\",{value:c,children:c},c))]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:threshold,onChange:e=>setThreshold(e.target.value),placeholder:\"Threshold\",className:\"border rounded px-2 py-2\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-4 py-2 bg-blue-600 text-white rounded\",onClick:async()=>{const t=parseInt(threshold,10);if(!itemName||!size||!color||Number.isNaN(t)||t<0)return;try{await saveThreshold(itemName.trim(),size,color,t);}catch{}},children:\"Save\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 mt-2\",children:[\"Options: colors \",options.colors.length,\", sizes \",options.sizes.length]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:\"Existing Overrides\"}),/*#__PURE__*/_jsx(\"button\",{onClick:loadAll,className:\"px-3 py-2 bg-blue-600 text-white rounded\",children:\"Refresh\"})]}),items.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 text-sm\",children:\"No custom thresholds set yet.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-2\",children:items.map((it,idx)=>/*#__PURE__*/_jsxs(\"li\",{className:\"border rounded p-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-semibold\",children:it.item_name}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[it.size,\" \\u2022 \",it.color]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-2 flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",defaultValue:it.threshold,min:\"0\",className:\"w-24 border rounded px-2 py-1 text-sm\",onBlur:async e=>{const newVal=parseInt(e.target.value,10);if(!Number.isNaN(newVal)&&newVal>=0&&newVal!==it.threshold){try{await saveThreshold(it.item_name,it.size,it.color,newVal);}catch{}}}}),/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 border rounded\",onClick:()=>fetchOptions(it.item_name),children:\"Options\"}),/*#__PURE__*/_jsx(\"button\",{className:\"px-2 py-1 border rounded\",onClick:()=>resetThreshold(it.item_name,it.size,it.color),children:\"Reset\"})]})]},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h3\",{className:\"font-semibold mb-2\",children:[\"Recent Changes \",itemName?`(for ${itemName})`:'']}),history.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"text-gray-600 text-sm\",children:\"No history yet.\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"space-y-1 text-sm\",children:history.map((h,i)=>{var _h$old_threshold;return/*#__PURE__*/_jsxs(\"li\",{className:\"border rounded p-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-medium\",children:[h.item_name,\" \\u2022 \",h.size,\" \\u2022 \",h.color]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-gray-700\",children:[(_h$old_threshold=h.old_threshold)!==null&&_h$old_threshold!==void 0?_h$old_threshold:'default',\" \\u2192 \",h.new_threshold,\" at \",h.changed_at]})]},i);})})]})]});};export default ThresholdManager;","map":{"version":3,"names":["React","useEffect","useState","API_BASE_URL","jsx","_jsx","jsxs","_jsxs","ThresholdManager","items","setItems","overrides","setOverrides","options","setOptions","colors","sizes","color_to_sizes","size_to_colors","loading","setLoading","error","setError","itemName","setItemName","availableItemNames","setAvailableItemNames","size","setSize","color","setColor","threshold","setThreshold","history","setHistory","loadAll","response","fetch","data","json","list","Array","isArray","custom_thresholds","raw_thresholds","Object","entries","map","_ref","key","item_name","split","o","ok","oj","e","loadItemNames","res","names","key_items","k","name","filter","Boolean","sort","fetchOptions","encodeURIComponent","saveThreshold","form","FormData","append","String","method","body","Error","window","dispatchEvent","CustomEvent","loadHistory","resetThreshold","sizesForColor","colorsForSize","className","children","type","value","onChange","target","placeholder","onFocus","onBlur","id","n","onClick","trim","s","c","t","parseInt","Number","isNaN","length","it","idx","defaultValue","min","newVal","h","i","_h$old_threshold","old_threshold","new_threshold","changed_at"],"sources":["/Users/SarthakSethi/SOFTWARE FOR DANIER /danier-stock-alert/frontend/src/components/ThresholdManager.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { API_BASE_URL } from '../config';\n\nconst ThresholdManager = () => {\n  const [items, setItems] = useState([]);\n  const [overrides, setOverrides] = useState([]);\n  const [options, setOptions] = useState({ colors: [], sizes: [], color_to_sizes: {}, size_to_colors: {} });\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n\n  // Create form state\n  const [itemName, setItemName] = useState('');\n  const [availableItemNames, setAvailableItemNames] = useState([]);\n  const [size, setSize] = useState('');\n  const [color, setColor] = useState('');\n  const [threshold, setThreshold] = useState('');\n\n  // History\n  const [history, setHistory] = useState([]);\n\n  const loadAll = async () => {\n    setLoading(true);\n    setError('');\n    try {\n      const response = await fetch(`${API_BASE_URL}/thresholds/all`);\n      const data = await response.json();\n      let list = [];\n      if (Array.isArray(data.custom_thresholds)) {\n        list = data.custom_thresholds;\n      } else if (data.raw_thresholds && typeof data.raw_thresholds === 'object') {\n        list = Object.entries(data.raw_thresholds).map(([key, threshold]) => {\n          const [item_name, size, color] = key.split('|');\n          return { key, item_name, size, color, threshold };\n        });\n      }\n      setItems(list);\n      // Try to fetch overrides directly (if backend deployed)\n      try {\n        const o = await fetch(`${API_BASE_URL}/thresholds/overrides`);\n        if (o.ok) {\n          const oj = await o.json();\n          setOverrides(oj.overrides || []);\n        }\n      } catch {}\n    } catch (e) {\n      setError('Failed to load thresholds');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => { loadAll(); }, []);\n\n  const loadItemNames = async () => {\n    try {\n      const res = await fetch(`${API_BASE_URL}/key-items/summary`);\n      const data = await res.json();\n      const names = (data.key_items || []).map(k => k.name).filter(Boolean).sort();\n      setAvailableItemNames(names);\n    } catch {}\n  };\n\n  const fetchOptions = async (name) => {\n    try {\n      const res = await fetch(`${API_BASE_URL}/key-items/options/${encodeURIComponent(name)}`);\n      const data = await res.json();\n      setOptions({\n        colors: data.colors || [],\n        sizes: data.sizes || [],\n        color_to_sizes: data.color_to_sizes || {},\n        size_to_colors: data.size_to_colors || {}\n      });\n    } catch (e) {\n      setOptions({ colors: [], sizes: [], color_to_sizes: {}, size_to_colors: {} });\n    }\n  };\n\n  const saveThreshold = async (itemName, size, color, threshold) => {\n    const form = new FormData();\n    form.append('item_name', itemName);\n    form.append('size', size);\n    form.append('color', color);\n    form.append('threshold', String(threshold));\n    const response = await fetch(`${API_BASE_URL}/thresholds/set`, { method: 'POST', body: form });\n    if (!response.ok) throw new Error('Failed to save');\n    window.dispatchEvent(new CustomEvent('thresholdsUpdated'));\n    await loadAll();\n    await loadHistory(itemName);\n  };\n\n  const resetThreshold = async (itemName, size, color) => {\n    const response = await fetch(`${API_BASE_URL}/thresholds/reset/${encodeURIComponent(itemName)}/${encodeURIComponent(size)}/${encodeURIComponent(color)}`, {\n      method: 'DELETE'\n    });\n    if (!response.ok) throw new Error('Failed to reset');\n    window.dispatchEvent(new CustomEvent('thresholdsUpdated'));\n    await loadAll();\n    await loadHistory(itemName);\n  };\n\n  const loadHistory = async (name) => {\n    try {\n      const res = await fetch(`${API_BASE_URL}/thresholds/history?item_name=${encodeURIComponent(name)}&limit=50`);\n      if (!res.ok) { setHistory([]); return; }\n      const data = await res.json();\n      setHistory(data.history || []);\n    } catch { setHistory([]); }\n  };\n\n  // Derived filtered options for UX\n  const sizesForColor = color && options.color_to_sizes[color] ? options.color_to_sizes[color] : options.sizes;\n  const colorsForSize = size && options.size_to_colors[size] ? options.size_to_colors[size] : options.colors;\n\n  return (\n    <div className=\"p-6\">\n      <h2 className=\"text-xl font-semibold mb-4\">Threshold Manager</h2>\n      {loading && <div>Loading...</div>}\n      {error && <div className=\"text-red-600 text-sm\">{error}</div>}\n\n      {/* Create / Update Form */}\n      <div className=\"bg-white rounded border p-4 mb-6\">\n        <h3 className=\"font-semibold mb-3\">Create or Update Threshold</h3>\n        <div className=\"grid grid-cols-1 md:grid-cols-5 gap-2 items-center\">\n          <div className=\"col-span-2 flex gap-2\">\n            <input\n              type=\"text\"\n              value={itemName}\n              onChange={(e) => { setItemName(e.target.value); setSize(''); setColor(''); setOptions({ colors: [], sizes: [], color_to_sizes: {}, size_to_colors: {} }); }}\n              placeholder=\"Item name (e.g., RONAN)\"\n              className=\"flex-1 border rounded px-3 py-2\"\n              onFocus={loadItemNames}\n              onBlur={() => { /* keep */ }}\n              list=\"itemNames\"\n            />\n            <datalist id=\"itemNames\">\n              {availableItemNames.map(n => <option key={n} value={n} />)}\n            </datalist>\n            <button className=\"px-3 py-2 border rounded\" onClick={() => { if (itemName.trim()) { fetchOptions(itemName.trim()); loadHistory(itemName.trim()); } }}>Options</button>\n          </div>\n          <select value={size} onChange={(e)=> setSize(e.target.value)} className=\"border rounded px-2 py-2\">\n            <option value=\"\">Size</option>\n            {sizesForColor.map((s) => (<option key={s} value={s}>{s}</option>))}\n          </select>\n          <select value={color} onChange={(e)=> setColor(e.target.value)} className=\"border rounded px-2 py-2\">\n            <option value=\"\">Color</option>\n            {colorsForSize.map((c) => (<option key={c} value={c}>{c}</option>))}\n          </select>\n          <input type=\"number\" value={threshold} onChange={(e)=> setThreshold(e.target.value)} placeholder=\"Threshold\" className=\"border rounded px-2 py-2\" />\n          <button\n            className=\"px-4 py-2 bg-blue-600 text-white rounded\"\n            onClick={async ()=>{\n              const t = parseInt(threshold, 10);\n              if (!itemName || !size || !color || Number.isNaN(t) || t < 0) return;\n              try { await saveThreshold(itemName.trim(), size, color, t); } catch {}\n            }}\n          >Save</button>\n        </div>\n        <div className=\"text-xs text-gray-500 mt-2\">Options: colors {options.colors.length}, sizes {options.sizes.length}</div>\n      </div>\n\n      {/* Existing Overrides */}\n      <div className=\"mb-6\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <h3 className=\"font-semibold\">Existing Overrides</h3>\n          <button onClick={loadAll} className=\"px-3 py-2 bg-blue-600 text-white rounded\">Refresh</button>\n        </div>\n        {items.length === 0 ? (\n          <div className=\"text-gray-600 text-sm\">No custom thresholds set yet.</div>\n        ) : (\n          <ul className=\"space-y-2\">\n            {items.map((it, idx) => (\n              <li key={idx} className=\"border rounded p-3\">\n                <div className=\"font-semibold\">{it.item_name}</div>\n                <div className=\"text-sm text-gray-600\">{it.size} • {it.color}</div>\n                <div className=\"mt-2 flex items-center gap-2\">\n                  <input\n                    type=\"number\"\n                    defaultValue={it.threshold}\n                    min=\"0\"\n                    className=\"w-24 border rounded px-2 py-1 text-sm\"\n                    onBlur={async (e) => {\n                      const newVal = parseInt(e.target.value, 10);\n                      if (!Number.isNaN(newVal) && newVal >= 0 && newVal !== it.threshold) {\n                        try { await saveThreshold(it.item_name, it.size, it.color, newVal); } catch {}\n                      }\n                    }}\n                  />\n                  <button className=\"px-2 py-1 border rounded\" onClick={() => fetchOptions(it.item_name)}>Options</button>\n                  <button className=\"px-2 py-1 border rounded\" onClick={() => resetThreshold(it.item_name, it.size, it.color)}>Reset</button>\n                </div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n\n      {/* History */}\n      <div>\n        <h3 className=\"font-semibold mb-2\">Recent Changes {itemName ? `(for ${itemName})` : ''}</h3>\n        {history.length === 0 ? (\n          <div className=\"text-gray-600 text-sm\">No history yet.</div>\n        ) : (\n          <ul className=\"space-y-1 text-sm\">\n            {history.map((h, i) => (\n              <li key={i} className=\"border rounded p-2\">\n                <div className=\"font-medium\">{h.item_name} • {h.size} • {h.color}</div>\n                <div className=\"text-gray-700\">{h.old_threshold ?? 'default'} → {h.new_threshold} at {h.changed_at}</div>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default ThresholdManager; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}